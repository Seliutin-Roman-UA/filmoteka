async function a(a){try{const t=await fetch(`https://api.themoviedb.org/3/trending/all/day?api_key=09fddff29ca445d38e447ae99342142f&page=${a}`);return await t.json()}catch(a){console.log("i am so sorry",a.message)}}async function t(a){let t="";"movie"===a&&(t="https://api.themoviedb.org/3/genre/movie/list?api_key=09fddff29ca445d38e447ae99342142f&language=en-US"),"tv"===a&&(t="https://api.themoviedb.org/3/genre/tv/list?api_key=09fddff29ca445d38e447ae99342142f&language=en-US");try{const a=await fetch(t),e=await a.json(),n={};return e.genres.forEach((a=>n[a.id]=a.name)),n}catch(a){console.log("i am so sorry",a.message)}}async function e(a,t){let e="";"movie"===a&&(e=`https://api.themoviedb.org/3/movie/${t}?api_key=09fddff29ca445d38e447ae99342142f`),"tv"===a&&(e=`https://api.themoviedb.org/3/tv/${t}?api_key=09fddff29ca445d38e447ae99342142f`);try{const a=await fetch(e);return await a.json()}catch(a){console.log("i am so sorry",a.message)}}async function n(a){const t=a.currentTarget.dataset.id,n=a.currentTarget.dataset.media_type;!function(a,t){console.log("about film!!! >>>> ",a,t);let e="",n="";switch(t){case"movie":e=0===a.genres.length?"":a.genres.map((a=>a.name)).join(", "),n=`<img class="modal__img" src="${a.poster_path?`https://image.tmdb.org/t/p/w500${a.poster_path}`:"./noimage.c59940df.jpg"}" alt="poster"><div modal__info><p class="modal__name">${a.title}</p>\n            <p class="modal__voite"> ${a.vote_average}/${a.vote_count}</p>\n            <p class="modal__popularity"> ${a.popularity}</p>\n            <p class="modal__original_title"> ${a.original_title}</p>\n            <p class="modal__ganre">${e}</p>\n            <p class="modal__overview">${a.overview}</p></dir>`;break;case"tv":e=0===a.genres.length?"":a.genres.map((a=>a.name)).join(", "),n=`<img class="modal__img" src="${a.poster_path?`https://image.tmdb.org/t/p/w500${a.poster_path}`:"./noimage.c59940df.jpg"}" alt="poster">\n            <div modal__info><p class="modal__name">${a.name}</p>\n            <p class="modal__voite"> ${a.vote_average}/${a.vote_count}</p>\n            <p class="modal__popularity"> ${a.popularity}</p>\n            <p class="modal__original_title"> ${a.original_name}</p>\n            <p class="modal__ganre">${e}</p>\n            <p class="modal__overview">${a.overview}</p></dir>`}g.modal.innerHTML=n}(await e(n,t),n)}function s(){let a="";0===r.pagination.arrowLeft?a+='<span class="pag_arrowleft grey">\n                    <svg class="btn__icon">\n                      <use href="#arrowleft"></use>\n                    </svg></span>':a+='<span class="pag_arrowleft">\n                    <svg class="btn__icon">\n                      <use href="#arrowleft"></use>\n                    </svg></span>',1===r.pagination.buttonStart&&(a+='<span class="pag_block" data-page="1">1</span>'),1===r.pagination.gapLeft&&(a+='<span class="pag_dots">...</span>'),r.pagination.button.forEach(((t,e)=>{1===t&&(e+1===Number(r.currentPage)?a+=`<span class="pag_block active" data-page="${e+1}">${e+1}</span>`:a+=`<span class="pag_block " data-page="${e+1}">${e+1}</span>`)})),1===r.pagination.gapRight&&(a+='<span class="pag_dots">...</span>'),1===r.pagination.buttonFinish&&(a+=`<span class="pag_block" data-page="${r.totalPages}">${r.totalPages}</span>`),0===r.pagination.arrowRight?a+='<span class="pag_arrowright grey">\n                    <svg class="btn__icon">\n                      <use href="#arrowright"></use>\n                    </svg></span>':a+='<span class="pag_arrowright">\n                    <svg class="btn__icon">\n                      <use href="#arrowright"></use>\n                    </svg></span>',g.pagination.innerHTML=a,document.querySelector(".pag_arrowleft").addEventListener("click",(()=>{r.changeCurrentPage(r.currentPage-1)})),document.querySelector(".pag_arrowright").addEventListener("click",(()=>{r.changeCurrentPage(r.currentPage+1)})),document.querySelectorAll(".pag_block").forEach((a=>{a.addEventListener("click",(a=>{console.log(a.target.dataset.page),r.changeCurrentPage(a.target.dataset.page)}))}))}const r={currentPage:1,totalPages:1,pagination:{arrowLeft:null,buttonStart:null,gapLeft:null,button:[],gapRight:null,buttonFinish:null,arrowRight:null},query:null,fillpaginationButton(){let a,t,e=this.currentPage-1,n=this.totalPages-1;if(this.totalPages<5){for(this.pagination.button=[],i=0;i<=n;i++)this.pagination.button[i]=1;return this.pagination.arrowLeft=0,this.pagination.buttonStart=0,this.pagination.gapLeft=0,this.pagination.gapRight=0,this.pagination.buttonFinish=0,void(this.pagination.arrowRight=0)}a=e-2,t=e+2,e<3&&(a=0,t=4),n-e<3&&(a=n-4,t=n);for(let e=0;e<=n;e++)this.pagination.button[e]=0,e>=a&&e<=t&&(this.pagination.button[e]=1);this.pagination.arrowLeft=e>0?1:0,this.pagination.buttonStart=a>=2?1:0,this.pagination.gapLeft=a>=1?1:0,this.pagination.gapRight=n-t>0?1:0,this.pagination.buttonFinish=n-t<=1?0:1,this.pagination.arrowRight=t<n?1:0},async changeCurrentPage(a){const t=Number(a);if(t<1)return"reject";if(t>this.totalPages)return"reject";this.currentPage=t;const e=await this.query(t);var i;r.totalPages=e.total_pages,this.fillpaginationButton(),i=e.results,g.gallary.innerHTML=i.map((a=>{let t="";switch(a.media_type){case"movie":return t=0===a.genre_ids.length?"":a.genre_ids.map((a=>o[a])).join(", "),` <li class="card" data-id="${a.id}" data-media_type="${a.media_type}">\n            <img class="card__img" src="${a.poster_path?`https://image.tmdb.org/t/p/w500${a.poster_path}`:"./noimage.c59940df.jpg"}" alt="poster">\n            <p class="card__name">${a.title}</p>\n            <p class="card__info"><span class="card__ganre">${t} |</span>\n            <span>${a.release_date?a.release_date.slice(0,4):"unknown"}</span>\n            <span class="card__rating"> ${a.popularity?a.popularity.toFixed(1):"unknown"}</span></p>\n            </li>`;case"tv":return t=0===a.genre_ids.length?"":a.genres=a.genre_ids.map((a=>p[a])).join(", "),` <li class="card" data-id="${a.id}" data-media_type="${a.media_type}">\n            <img class="card__img" src="${a.poster_path?`https://image.tmdb.org/t/p/w500${a.poster_path}`:"./noimage.c59940df.jpg"}" alt="poster">\n            <p class="card__name">${a.name}</p>\n            <p class="card__info"><span class="card__ganre">${t} |</span>\n            <span>${a.first_air_date?a.first_air_date.slice(0,4):"unknown"}</span>\n            <span class="card__rating"> ${a.popularity?a.popularity.toFixed(1):"unknown"}</span></p>\n            </li>`;case"person":return` <li class="card">\n            <img class="card__img" src="${a.profile_path?`https://image.tmdb.org/t/p/w500${a.profile_path}`:"./noimage.c59940df.jpg"}" alt="poster">\n            <p class="card__name">${a.name}</p>\n            <p class="card__info"><span class="card__ganre">person |</span>\n                 <span class="card__rating"> ${a.popularity?a.popularity.toFixed(1):"unknown"}</span></p>\n            </li>`}})).join(""),document.querySelectorAll(".card").forEach((a=>a.addEventListener("click",n))),s()}};let o={},p={};const g={gallary:document.querySelector(".gallery"),pagination:document.querySelector(".pagination"),searchForm:document.querySelector(".searchform"),modal:document.querySelector(".modal")};function l(t){t.preventDefault();const e=t.currentTarget.elements.string.value;var n;r.query=e?(n=e,async function(a){try{const t=await fetch(`https://api.themoviedb.org/3/search/movie?api_key=09fddff29ca445d38e447ae99342142f&page=${a}&query=${n}`),e=await t.json();return{total_pages:e.total_pages,results:e.results.map((a=>({...a,media_type:"movie"})))}}catch(a){console.log("i am so sorry",a.message)}}):a,r.changeCurrentPage(1)}g.searchForm.addEventListener("submit",l),g.searchForm.addEventListener("focusout",l),async function(){o=await t("movie"),p=await t("tv"),r.query=a,r.changeCurrentPage(1)}();
//# sourceMappingURL=index.6fefde73.js.map
